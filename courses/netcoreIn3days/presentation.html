<!DOCTYPE html>
<html>
  <head>
    <title>.NET Core</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, top

# .NET Core 

http://dontpad.com/netcore20210106

http://dontpad.com/netcore20210101

---

# Agenda
<small>
10. About me

20. .NET Core, .NET Standard, .NET Framework

25. Some C# main points

25. .NET Core backend - BL, DAL, Security, tests

50. Some EF main points - console, ASP.NET Scaffolding

60. Functional Anatomy of ASP.NET Core 	

65.  Ecosystem
	
70. C# 9 What's new

75. ASP.NET Core 5

80. Roslyn Code Generators

85. EF Core 5

90. Breaking Changes

95. General discussion architecture

</small>
---
class: center, top

# About me
![:img ignat, 10%](ignat.jpg)
Andrei Ignat http://msprogrammer.serviciipeweb.ro/

www.ASP.NET forum moderator

YouTube 5 minutes .NET and tools : http://bit.ly/5MinTools

Book Making Open Source Component  : http://bit.ly/NetOpenSourceComponent

Book Copy Paste from StackOverflow : https://amzn.to/2PQ8EDc

Monthly meetings:  https://www.meetup.com/Bucharest-A-D-C-E-S-Meetup/


---

# .NET Core, .NET Standard, .NET Framework

https://docs.microsoft.com/en-us/dotnet/standard/net-standard
https://dotnet.microsoft.com/en-us/platform/dotnet-standard#versions


.NET Standard 2.0 is that it ups the number of available APIs from 13,000 to 32,000, compared to .NET Standard 1.6. 

<!-- https://raw.githubusercontent.com/dotnet/standard/master/docs/versions/netstandard2.0_diff.md -->
https://raw.githubusercontent.com/dotnet/standard/v2.1.0/docs/versions/netstandard2.0_diff.md

Compatibility Problems https://github.com/dotnet/standard/issues/481

NET 5.0 => 

1. .NET Standard project visible in both .NET Core and .NET Framework

2.  Environment.CurrentDirectory 

Demo: 

DemoNetStandard folder,  What's new 1 + What's new 2

---

# C# and .NET
	
	Latest version .NET 7 : https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-7
	Latest version C# : https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-11

	What can you do:

	- Console
	- Desktop ( WPF, Winforms)
	- Web ( ASP.NET Core WebAPI / MVC / RazorWebPages , Blazor)
	- Mobile ( and try to unify desktop ): MAUI
	- Game Development ( Unity)
	- ML/ AI : ML.NET
	- Azure Cloud ( + integrations)
	- IOT (Windows IoT Core)

	Demo : Let's see if you have installed VS with templates

---

# Some C# main points - Task ASYNC AWAIT

1. Race conditions - who has the error ? Virus up
	
1. https://channel9.msdn.com/Events/TechDays/Techdays-2014-the-Netherlands/Async-programming-deep-dive  – to gain inner knowledge about what code is async / await

2. Read https://blog.stephencleary.com/2012/02/async-and-await.html to have started into async await

3. Read MSDN for a better understanding : https://msdn.microsoft.com/en-us/magazine/jj991977.aspx?f=255&MSPPError=-2147217396

4. Common pitfalls in ASP.NET  Framework( not in console! ) with async await: https://blog.stephencleary.com/2012/07/dont-block-on-async-code.html

5. https://blog.stephencleary.com/2017/03/aspnetcore-synchronization-context.html
	
3. DemoAsyncAwait - problem in windows forms,
No problem in ASP.NET Core

---

# Some C# main points - part 2
	
1. IEnumerable vs Array vs yield

1. Async enumerable :Console, WebAPI NetCore3WhatsNew/DemoAsynEnumerable.csproj

1. Default Interface Inheritance :NetCore3WhatsNew/CSharp8WhatsNew.csproj  

1. Switch,  Deconstruct

1. COM objects:NetCore3WhatsNew/WpfCom.csproj

1. Automatic Update -ClickOnce
	
1. using , indexes, others: NetCore3WhatsNew/CSharp8WhatsNew.csproj

1. record : CSharp9WhatsNew


---

# C# advanced
	
1. Nullable Enable : Demo : Part3/Part3.sln
1. CallerArgumentExpression and others :Demo: Part3/Part3.sln
https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/attributes/caller-information
1. Build ( trim, single file, self contained )
https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-build
https://learn.microsoft.com/en-us/dotnet/core/deploying/single-file/overview?tabs=cli

1. Diamond hell solved with plugins:
Demo: AssemblyLoadingUnloadingDiamond.sln
	
1. Static interfaces and math support , file class, raw strings
https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/tutorials/static-virtual-interface-members

Demo: WhatsNewNet7/code/WhatsNewCSharp11/WhatsNewCSharp11.sln

---
 
# ASP.NET Core  introduction

WebAPI  - data, ActionResult , Result<T>/TypedResults 

https://learn.microsoft.com/en-us/aspnet/core/web-api/action-return-types?view=aspnetcore-7.0

Demo: Start from scratch.

---

# .NET Core WEBAPI / MVC / Blazor

Demo: Start from scratch

Blazor demo with JS : WhatsNewNet7/code/TestBlazor/TestBlazor.sln

---

# .NET Core backend - BL, DAL, Security, tests

http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx/

https://docs.microsoft.com/en-us/ef/core/miscellaneous/testing/in-memory

Demo: DemoNETCoreTest
    

---
# EF - console, ASP.NET Scaffolding

https://learn.microsoft.com/en-us/ef/core/what-is-new/ef-core-8.0/whatsnew

https://docs.microsoft.com/en-us/ef/core/managing-schemas/scaffolding

https://learn.microsoft.com/en-us/ef/core/managing-schemas/scaffolding/templates?tabs=dotnet-core-cli

See create.sql

Demo interceptor,executedelete/executeupdate,T4: 
WhatsNewNet7/code/EFCoreDemos

---
class: center, top
# Functional Anatomy of ASP.NET Core

1. DI 
2. WebAPI  + Swagger
4. Routing
5. Middleware
4. Versioning
5. Not in this demo :
	4. Formatters 
	3. Filters
Demo: demoFromAttributes ,Versioning 

---
class: center, top
# Ecosystem

1. Logging - demo NLog
2. HealthChecks - demo Xabaril
3. Activity  - demo JaegerNetCore
		
---
class: center, top
# C# 9 What's new
	
1. records ,

2. init only setters,
3. new ,
4. Extension GetEnumerator support for foreach loops,
5. pattern matching and, or, not ,
6. New features for partial methods

https://docs.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-9


Demo

---
class: center, top
# ASP.NET Core 5

https://docs.microsoft.com/en-us/aspnet/core/release-notes/aspnetcore-5.0?view=aspnetcore-5.0

Swagger ,JSON extensions ,Startup class,Blazor,SignalR, Kestrel

No demo

---
class: center, top
# Roslyn Code Generators

Just add code, do not modify, at Build Time https://github.com/dasMulli/data-builder-generator

https://github.com/dotnet/roslyn/blob/master/docs/features/source-generators.cookbook.md

https://www.cazzulino.com/source-generators.html

example : Skinny Generators

https://github.com/ignatandrei/AOP_With_Roslyn

On the fly Demo

---
class: center, top

# EF Core 5

https://docs.microsoft.com/en-us/ef/core/what-is-new/ef-core-5.0/whatsnew

https://docs.microsoft.com/en-us/ef/core/managing-schemas/scaffolding

Demo for ToSqlQuery ,PropertyBags- dictionary, Split-Query, ToQueryString

Many , many more:

Many2Many

Dotnet counters

ISaveChangesInterceptor ( see also https://docs.microsoft.com/en-us/ef/core/logging-events-diagnostics/interceptors )

Migrations , TPT instead of TPH

Table Valued Functions

ToTable / ToView

ContextFactory - to create

---
class: center, top
# Breaking Changes

https://docs.microsoft.com/en-us/dotnet/core/compatibility/5.0

https://docs.microsoft.com/en-us/ef/core/what-is-new/ef-core-5.0/breaking-changes

https://jimmybogard.com/mind-your-strings-with-net-5-0/

https://www.infoq.com/news/2020/12/net-5-breaking-changes/

https://www.infoq.com/news/2020/12/net-5-breaking-changes-2/

Demo: globalization


---
class: center, top
# General discussion architecture

---
class: center, top

# Questions ?


Andrei Ignat http://msprogrammer.serviciipeweb.ro/



    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
	 <script>
	remark.macros.img = function (altText, width) {
  var url = this;
  return '<img alt="' + altText + '" src="' + url + '" style="width: ' + width + '" />';
};
      var slideshow = remark.create();
    </script>
  </body>
</html>