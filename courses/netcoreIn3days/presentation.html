<!DOCTYPE html>
<html>
  <head>
    <title>.NET Core</title>
    <meta charset="utf-8">
    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic);

      body { font-family: 'Droid Serif'; }
      h1, h2, h3 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }
      .remark-code, .remark-inline-code { font-family: 'Ubuntu Mono'; }
    </style>
  </head>
  <body>
    <textarea id="source">

class: center, top

# .NET Core 

<!-- http://dontpad.com/netcore20210106 -->

<!-- http://dontpad.com/netcore20210101 -->

https://dontpad.com/netcore3days2023

Code : http://msprogrammer.serviciipeweb.ro/NetCore3Days.zip
	   

---

# Agenda

	Day 1
	1.	.NET Core, .NET Standard, .NET Framework
	2.	C#  main points
	3.	C# advanced
	4.	ASP.NET Core  introduction
	Day 2
	1.	.NET Core WEBAPI / MVC / Blazor
	2.	.NET Core backend – BL, DAL, Security, tests
	3.	EF – console, ASP.NET Scaffolding
	4.	Functional Anatomy of ASP.NET Core
	5.	Ecosystem
	6.	.NET Core WebAPI – demo and exercises/questions
	Day 3
	1.	ASP.NET Core Latest
	2.	Roslyn Code Generators
	3.	EF Core Latest
	4.	Practical Exercise with WebAPI / MVC



---
class: center, top

# About me
![:img ignat, 10%](ignat.jpg)
Andrei Ignat http://msprogrammer.serviciipeweb.ro/

www.ASP.NET forum moderator

YouTube 5 minutes .NET and tools : http://bit.ly/5MinTools

Book Making Open Source Component  : http://bit.ly/NetOpenSourceComponent

Book Copy Paste from StackOverflow : https://amzn.to/2PQ8EDc

Monthly meetings:  https://www.meetup.com/Bucharest-A-D-C-E-S-Meetup/


---

# .NET Core, .NET Standard, .NET Framework

https://docs.microsoft.com/en-us/dotnet/standard/net-standard
https://dotnet.microsoft.com/en-us/platform/dotnet-standard#versions


.NET Standard 2.0 is that it ups the number of available APIs from 13,000 to 32,000, compared to .NET Standard 1.6. 

<!-- https://raw.githubusercontent.com/dotnet/standard/master/docs/versions/netstandard2.0_diff.md -->
https://raw.githubusercontent.com/dotnet/standard/v2.1.0/docs/versions/netstandard2.0_diff.md

Compatibility Problems https://github.com/dotnet/standard/issues/481

NET 5.0 => 

1. .NET Standard project visible in both .NET Core and .NET Framework

2.  Environment.CurrentDirectory 

Demo: 

DemoNetStandard folder,  What's new 1 + What's new 2

---

# C# and .NET
	
	Latest version .NET 7 : https://learn.microsoft.com/en-us/dotnet/core/whats-new/dotnet-7
	Latest version C# : https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/csharp-11

	What can you do:

	- Console
	- Desktop ( WPF, Winforms)
	- Web ( ASP.NET Core WebAPI / MVC / RazorWebPages , Blazor)
	- Mobile ( and try to unify desktop ): MAUI
	- Game Development ( Unity)
	- ML/ AI : ML.NET
	- Azure Cloud ( + integrations)
	- IOT (Windows IoT Core)

	Demo : Let's see if you have installed VS with templates

---

# Some C# main points - Task ASYNC AWAIT

1. Race conditions - who has the error ? Virus up
	
1. https://channel9.msdn.com/Events/TechDays/Techdays-2014-the-Netherlands/Async-programming-deep-dive  – to gain inner knowledge about what code is async / await

2. Read https://blog.stephencleary.com/2012/02/async-and-await.html to have started into async await

3. Read MSDN for a better understanding : https://msdn.microsoft.com/en-us/magazine/jj991977.aspx?f=255&MSPPError=-2147217396

4. Common pitfalls in ASP.NET  Framework( not in console! ) with async await: https://blog.stephencleary.com/2012/07/dont-block-on-async-code.html

5. https://blog.stephencleary.com/2017/03/aspnetcore-synchronization-context.html
	
3. DemoAsyncAwait - problem in windows forms,
No problem in ASP.NET Core

---

# Some C# main points - part 2
	
1. IEnumerable vs Array vs yield

1. Async enumerable :Console, WebAPI NetCore3WhatsNew/DemoAsynEnumerable.csproj

1. Default Interface Inheritance :NetCore3WhatsNew/CSharp8WhatsNew.csproj  

1. Switch,  Deconstruct

1. COM objects:NetCore3WhatsNew/WpfCom.csproj

1. Automatic Update -ClickOnce
	
1. using , indexes, others: NetCore3WhatsNew/CSharp8WhatsNew.csproj

1. record : CSharp9WhatsNew


---

# C# advanced
	
1. Nullable Enable : Demo : Part3/Part3.sln
1. CallerArgumentExpression and others :Demo: Part3/Part3.sln
https://learn.microsoft.com/en-us/dotnet/csharp/language-reference/attributes/caller-information
1. Build ( trim, single file, self contained )
https://learn.microsoft.com/en-us/dotnet/core/tools/dotnet-build
https://learn.microsoft.com/en-us/dotnet/core/deploying/single-file/overview?tabs=cli

1. Diamond hell solved with plugins:
Demo: AssemblyLoadingUnloadingDiamond.sln
	
1. Static interfaces and math support , file class, raw strings
https://learn.microsoft.com/en-us/dotnet/csharp/whats-new/tutorials/static-virtual-interface-members

Demo: WhatsNewNet7/code/WhatsNewCSharp11/WhatsNewCSharp11.sln

---
 
# ASP.NET Core  introduction

WebAPI  - data, ActionResult , Result<T>/TypedResults 

https://learn.microsoft.com/en-us/aspnet/core/web-api/action-return-types?view=aspnetcore-7.0

Demo: Start from scratch.

---

# .NET Core WEBAPI / MVC / Blazor

Demo: Start from scratch

Blazor demo with JS : WhatsNewNet7/code/TestBlazor/TestBlazor.sln

---

# .NET Core backend - BL, DAL, Security, tests

http://haacked.com/archive/2012/01/02/structuring-unit-tests.aspx/

https://docs.microsoft.com/en-us/ef/core/miscellaneous/testing/in-memory

Demo: DemoNETCoreTest
    

---
# EF - console, ASP.NET Scaffolding

https://learn.microsoft.com/en-us/ef/core/what-is-new/ef-core-8.0/whatsnew

https://docs.microsoft.com/en-us/ef/core/managing-schemas/scaffolding

https://learn.microsoft.com/en-us/ef/core/managing-schemas/scaffolding/templates?tabs=dotnet-core-cli

See create.sql

Demo interceptor,executedelete/executeupdate,T4: 
WhatsNewNet7/code/EFCoreDemos

---
class: center, top
# Functional Anatomy of ASP.NET Core

1. DI 
2. WebAPI  + Swagger
4. Routing
5. Middleware
https://docs.microsoft.com/en-us/aspnet/core/fundamentals/middleware/extensibility
4. Versioning
https://github.com/microsoft/aspnet-api-versioning/wiki/Versioning-via-the-URL-Path
5. Not in this demo :
	4. Formatters 
	3. Filters

Demo: demoFromAttributes ,Versioning 

---
class: center, top
# Ecosystem

1. Logging with NLOG - demo Logging
https://github.com/NLog/NLog/wiki/Getting-started-with-ASP.NET-Core-5
2. HealthChecks - demo NETCoreHealthChecks/Xabaril
https://github.com/Xabaril/AspNetCore.Diagnostics.HealthChecks
3. Activity  - demo JaegerNetCore
		
---
class: center, top
		
# ASP.NET Core Latest

RateLimiter https://learn.microsoft.com/en-us/aspnet/core/performance/rate-limit

Problem details service https://learn.microsoft.com/en-us/aspnet/core/web-api/handle-errors

IParsable .TryParse
https://learn.microsoft.com/en-us/aspnet/core/mvc/models/model-binding?view=aspnetcore-7.0#itp7

TypedResults https://learn.microsoft.com/en-us/dotnet/api/microsoft.aspnetcore.http.inestedhttpresult

IValidatableObject

Demo : WhatsNewNet7\code\ASPNET7

---
class: center, top
# Roslyn Code Generators

Just add code, do not modify, at Build Time 

Deprecated but easy to demo:
https://github.com/dotnet/roslyn/blob/master/docs/features/source-generators.cookbook.md

Demo: 

RoslynCodeGenerators/RSCG_VerySimple

RoslynCodeGenerators/RSCG_TimeBombComment

More examples: https://ignatandrei.github.io/RSCG_Examples/v2/

---
class: center, top
# General discussion architecture

---
class: center, top
# Practical exercise 


Sunteti BNR. 
Fiecare banca care are sucursala in RO 
va trimite datele cu persoane ( id )si datorii .

Cerinta 10:

Afisati Bancile si Persoanele care au datorii la banci ( amount>0) .

Trebuie afisata fiecare Banca cu id si nume si 
, pentru fiecare banca,  lista de persoane pentru acea banca care au datorii la banca respectiva

Cerinta 20:

Afisati persoanele care au datorii la cel putin 2 banci


Cerinta 30:

Transferati datoria unei persoane de la o banca aceleaiasi persoane la alta banca .

Daca in urma transferului se  depaseste MaxDebt pe banca respectiva, transferul nu se mai face. 
Intoarceti un status code de la https://en.wikipedia.org/wiki/List_of_HTTP_status_codes


---
class: center, top

# Questions ?


Andrei Ignat http://msprogrammer.serviciipeweb.ro/



    </textarea>
    <script src="https://remarkjs.com/downloads/remark-latest.min.js">
    </script>
    <script>
      var slideshow = remark.create();
    </script>
	 <script>
	remark.macros.img = function (altText, width) {
  var url = this;
  return '<img alt="' + altText + '" src="' + url + '" style="width: ' + width + '" />';
};
      var slideshow = remark.create();
    </script>
  </body>
</html>